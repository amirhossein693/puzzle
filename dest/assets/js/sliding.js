function setBoard(){boardParts=new Array(tileCount);for(var a=0;tileCount>a;++a){boardParts[a]=new Array(tileCount);for(var b=0;tileCount>b;++b)boardParts[a][b]={},boardParts[a][b].x=tileCount-1-a,boardParts[a][b].y=tileCount-1-b}emptyLoc.x=boardParts[tileCount-1][tileCount-1].x,emptyLoc.y=boardParts[tileCount-1][tileCount-1].y,solved=!1}function drawTiles(){context.clearRect(0,0,boardSize,boardSize);for(var a=0;tileCount>a;++a)for(var b=0;tileCount>b;++b){var c=boardParts[a][b].x,d=boardParts[a][b].y;(a!=emptyLoc.x||b!=emptyLoc.y||solved===!0)&&context.drawImage(img,c*tileSize,d*tileSize,tileSize,tileSize,a*tileSize,b*tileSize,tileSize,tileSize)}}function distance(a,b,c,d){return Math.abs(a-c)+Math.abs(b-d)}function slideTile(a,b){solved||(boardParts[a.x][a.y].x=boardParts[b.x][b.y].x,boardParts[a.x][a.y].y=boardParts[b.x][b.y].y,boardParts[b.x][b.y].x=tileCount-1,boardParts[b.x][b.y].y=tileCount-1,a.x=b.x,a.y=b.y,checkSolved())}function checkSolved(){for(var a=!0,b=0;tileCount>b;++b)for(var c=0;tileCount>c;++c)(boardParts[b][c].x!=b||boardParts[b][c].y!=c)&&(a=!1);solved=a}var context=document.getElementById("puzzle").getContext("2d"),img=new Image;img.src="assets/images/002.jpg",img.addEventListener("load",drawTiles,!1);var boardSize=document.getElementById("puzzle").width,tileCount=document.getElementById("scale").value,tileSize=boardSize/tileCount,clickLoc={};clickLoc.x=0,clickLoc.y=0;var emptyLoc={};emptyLoc.x=0,emptyLoc.y=0;var solved=!1,boardParts;setBoard(),document.getElementById("scale").onchange=function(){tileCount=this.value,tileSize=boardSize/tileCount,setBoard(),drawTiles()},document.getElementById("puzzle").onclick=function(a){clickLoc.x=Math.floor((a.pageX-this.offsetLeft)/tileSize),clickLoc.y=Math.floor((a.pageY-this.offsetTop)/tileSize),1==distance(clickLoc.x,clickLoc.y,emptyLoc.x,emptyLoc.y)&&(slideTile(emptyLoc,clickLoc),drawTiles()),solved&&setTimeout(function(){alert("You solved it!")},500)};